---
title: "Zennã®è¨˜äº‹ã‚’exportã™ã‚‹"
emoji: "ğŸ˜º"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["zenn", "javascript"]
published: false
---

# ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³

1. zennã¨GitHubã‚’é€£æºã—ãŸ
2. æ—¢å­˜ã®è¨˜äº‹ã‚’GitHubã«ç§»è¡Œã—ãŸããªã£ãŸ
3. æ‰‹ä½œæ¥­ã®ä¸å®‰å®šã•ã¨æ‰‹é–“ãŒå«Œã«ãªã£ãŸ

# è¨˜äº‹ã‚’markdownã¨ã—ã¦æŠ½å‡ºã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

- JavaScript ã‚’é–‹ç™ºè€…ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«æµã—è¾¼ã‚“ã§å–ã‚Šå‡ºã™
    - zenn ã¯ SPA (Reactè£½) ã®ã‚ˆã†ã ã—ã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã¦ã‚‚ã‚‰ã‚ãªãã‚ƒè©±ã«ãªã‚‰ãªã„
- ç·¨é›†ãƒšãƒ¼ã‚¸ã¯è¦ç´ ãŒè¤‡é›‘ãªã®ã§ã€å…¬é–‹ã•ã‚ŒãŸè¨˜äº‹ã‚„ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ãƒšãƒ¼ã‚¸ã‚’ä½¿ã†
    - ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã®DOM.innerText ã§ã‚ã‚‹ç¨‹åº¦æ‹¾ãˆã‚‹ãŒã€ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã®æ‰±ã„ãŒé¢å€’

## æˆæœç‰©

```js
// configure
var INDENT = '  ';
var UL_PREFIX = '-';

var title = document.body.querySelector("h1[class^=ArticleHeader_title] > span").innerText;
var emoji = document.body.querySelector("div[class^=ArticleHeader_emoji]").innerText;
var type = document.body.querySelector("a[class^=ArticleHeader_category] > span").innerText.toLowerCase();
var topics = Array.from(document.body.querySelector("div[class^=ArticleSidebar_topic]")
    .querySelectorAll("div[class^=ArticleSidebar_topicName]"))
    .map((e) => e.innerText.toLowerCase())
    .map((s) => `"${s}"`)
    .join(", ");
var published = document.body.querySelector("div[class^=ArticleHeader_draft]") == null ? "true": "false";

// contents
var parse_textnode = (node) => node.nodeValue;
var parse_code_inline = (node) => `\`${node.innerText}\``;
var parse_br = (node) => "\n";
var parse_a = (node) => `[${node.innerText}](${node.href})`;
var parse_img = (node) => {
    let content = "";
    let alt = node.alt;
    let src = node.src;
    let width = node.attributes.width;
    if (width) {
        content += `![${alt}](${src} ${width.value}x)`;
    } else {
        content += `![${alt}](${src})`;
    }

    return content;
};
var parse_em = (node) => `*${node.innerText}*`;
var parse_strong = (node) => `**${node.innerText}**`
var parse_s = (node) => `~~${node.innerText}~~`
var parse_node_for_statement = (node) => {
    if (node.nodeType === Node.TEXT_NODE) {
        return parse_textnode(node);
    }
    if (node.nodeType === Node.ELEMENT_NODE) {
        let content = "";
        let tagName = node.tagName.toLowerCase();
        switch (tagName) {
            // case "br": content += parse_br(node); break; // å¤§æœ¬ã®æ”¹è¡Œã‚³ãƒ¼ãƒ‰ã¯TextNodeã«ä»•è¾¼ã‚“ã§ã‚ã‚‹æ¨¡æ§˜
            case "code": content += parse_code_inline(node); break;
            case "a": content += parse_a(node); break;
            case "img": content += parse_img(node); break;
            case "em": content += parse_em(node); break; // ã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³ã¨ã‚¤ã‚¿ãƒªãƒƒã‚¯ã§åŒã˜è¨˜æ³•
            case "strong": content += parse_strong(node); break;
            case "s": content += parse_s(node); break;
        }

        return content;
    }
    return "";
};

var parse_h1 = (node) => `# ${node.innerText}` + "\n\n";
var parse_h2 = (node) => `## ${node.innerText}` + "\n\n";
var parse_h3 = (node) => `### ${node.innerText}` + "\n\n";
var parse_h4 = (node) => `#### ${node.innerText}` + "\n\n";
var parse_h5 = (node) => `##### ${node.innerText}` + "\n\n";
var parse_h6 = (node) => `###### ${node.innerText}` + "\n\n";
var parse_hr = (node) => "---" + "\n\n";
var parse_p = (node) => {
    let content = "";
    for (let child of node.childNodes) {
        content += parse_node_for_statement(child);
    }
    return `${content}` + "\n\n";
}
var parse_ul = (node, indentLevel = 0) => {
    let isTop = indentLevel === 0;
    let content = "";
    for (let li of node.children) {
        content += INDENT.repeat(indentLevel) + `${UL_PREFIX} ` + parse_li(li, indentLevel);
    }
    return `${content}` + (isTop? "\n": "");
};
var parse_ol = (node, indentLevel = 0) => {
    let isTop = indentLevel === 0;
    let content = "";
    let number = 0;
    for (let li of node.children) {
        number += 1;
        let prefix = `${number}.`;
        content += INDENT.repeat(indentLevel) + `${prefix} ` + parse_li(li, indentLevel);
    }
    return `${content}` + (isTop? "\n": "");
};
var parse_li = (node, indentLevel = 0) => {
    let content = "";
    let hasListOrNested = false || indentLevel !== 0;
    for (let child of node.childNodes) {
        if (child.nodeType === Node.TEXT_NODE) {
            content += parse_textnode(child);
            continue;
        }
        if (child.nodeType === Node.ELEMENT_NODE) {
            let tagName = child.tagName.toLowerCase();
            switch (tagName) {
                case "code": content += parse_code_inline(child); break;
                case "ul": content += parse_ul(child, indentLevel + 1); hasListOrNested = true; break;
                case "ol": content += parse_ol(child, indentLevel + 1); hasListOrNested = true; break;
            }
            continue;
        }
    }
    return content + (!hasListOrNested? "\n": "");
}
var parse_code_block_container = (node) => {
    let content = "```\n" + node.innerText + "```\n";
    return content + "\n";
}

var content = '';
var topNodeList = document.body.querySelectorAll("#toc-target-content > div > *");
var iter = topNodeList.values();
var result = iter.next();
while(!result.done) {
    let node = result.value;
    let tagName = node.tagName.toLowerCase();
    switch (tagName) {
        case "h1": content += parse_h1(node); break;
        case "h2": content += parse_h2(node); break;
        case "h3": content += parse_h3(node); break;
        case "h4": content += parse_h4(node); break;
        case "h5": content += parse_h5(node); break;
        case "h6": content += parse_h6(node); break;
        case "hr": content += parse_hr(node); break;
        case "p": content += parse_p(node); break;
        case "ul": content += parse_ul(node); break;
        case "ol": content += parse_ol(node); break;
        case "div": {
            let classList = node.classList;
            if (classList.contains("code-block-container")) {
                content += parse_code_block_container(node);
            }
            break;
        }
    }
    result = iter.next();
}


var markdown = `
---
title: "${title}"
emoji: "${emoji}"
type: "${type}" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [${topics}]
published: ${published}
---
${content}
`;

markdown
```

### title

- titleè¦ç´ ã£ã¦ã€çµæ§‹ä½™è¨ˆãªã‚‚ã®ãŒä»˜ããŒã¡
    - ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®åç§°ã¨ã‹
    - é€šçŸ¥ãŒã‚ã‚‹æ™‚ã« `[!]` ãŒå…ˆé ­ã«ä»˜ã„ãŸã‚Šã¨ã‹
- è¨˜äº‹ã®titleã¨ãƒ–ãƒ©ã‚¦ã‚¶(ã‚¿ãƒ–)ã®titleã¨ã§ã€æ±‚ã‚ã‚‰ã‚Œã‚‹ä»•äº‹ãŒé•ã†

### emoji

- æ‹¾ã†

### type

- æ‹¾ã£ã¦å°æ–‡å­—ã«ã™ã‚‹

### topics

- æ‹¾ã£ã¦å°æ–‡å­—ã«ã™ã‚‹

### published

- ä¸‹æ›¸ãè¦ç´ ã®æœ‰ç„¡ã§è‡ªæ˜

### content

#### å¯¾å¿œçŠ¶æ³

- [x] h1 - h6
- [x] p
- [x] ul
- [x] ol
- [x] code block
- [x] code inline
- [x] a (text)
- [ ] a (image)
- [x] img
- [x] img (widthä»˜ã)
- [x] caption
- [ ] table
- [ ] KaTex
- [ ] å¼•ç”¨
- [ ] æ³¨é‡ˆ
- [x] hr
- [x] ã‚¤ã‚¿ãƒªãƒƒã‚¯
- [x] å¤ªå­—
- [x] æ‰“ã¡æ¶ˆã—ç·š
- [ ] ã‚³ãƒ¡ãƒ³ãƒˆ (å¯¾å¿œä¸èƒ½)
- [ ] Zennè¨˜æ³•: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- [ ] Zennè¨˜æ³•: è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- [ ] Zennè¨˜æ³•: ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³
- [ ] ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åŸ‹è¾¼: ãƒªãƒ³ã‚¯
- [ ] ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åŸ‹è¾¼: Twitter
- [ ] ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åŸ‹è¾¼: YouTube
- [ ] ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åŸ‹è¾¼: GitHub Gist
- [ ] ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åŸ‹è¾¼: CodePen
- [ ] ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åŸ‹è¾¼: SlideShare
- [ ] ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åŸ‹è¾¼: SpeakerDeck
- [ ] ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åŸ‹è¾¼: JSFiddle
- [ ] ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åŸ‹è¾¼: CodeSandbox
- [ ] ã‚³ãƒ³ãƒ†ãƒ³ãƒ„åŸ‹è¾¼: StackBlitz

#### æ„Ÿæƒ³

- ul, ol ã®å…¥ã‚Œå­æ§‹é€ ãŒæœ¬å½“ã«é¢å€’ãã•ã„
- æ³¨é‡ˆã¯è¨˜äº‹å…¨ä½“ã®é€šã—ç•ªå·ãŒå¿…è¦ãªã®ã§å„ä»‹

### slug
