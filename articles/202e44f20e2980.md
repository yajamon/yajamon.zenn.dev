---
title: "permutationsã£ã¦ãªã‚“ã‚„ã­ã‚“"
emoji: "ğŸ¦€"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["rust", "algorithm"]
published: false
---
- é †åˆ—ã®ã“ã¨
- æœ€è¿‘AtCoderã«å‚åŠ ã—ã¦ã€è©°ã¾ã‚‹å•é¡Œã®ãƒ‘ãƒ¼ãƒ„ã«ãªã£ã¦ã„ã‚‹äº‹ãŒå¤šã„
- è§£èª¬ã‚’è¦‹ã¦ã‚‚ã—ã‚Œã£ã¨ `next_permutation()` ãªã©ã¨å‡ºã¦ãã¦ã¯ã„çµ‚ã‚ã‚Šã€ã¿ãŸã„ãªã“ã¨ã‚‚å¤šã„
- å­¦æ¥­ã§ç™»å ´ã™ã‚‹ã¨ããªã©ã¯å°‚ã‚‰é †åˆ—ã®ã€Œæ•°ã€ãªã©å€‹æ•°ã«ç€ç›®ã™ã‚‹ãŒã€ç«¶ãƒ—ãƒ­ã®é¡Œæã«ãŠã„ã¦ã¯é †åˆ—ã®ã€Œä¸­èº«ã€ã«ç€ç›®ã™ã‚‹ã‚“ã ãªã

## æ¦‚å¿µ

- ã„ã‚ã‚†ã‚‹ã€Œç®±ã®ä¸­ã«1~4ã®æ•°å­—ãŒæ›¸ã‹ã‚ŒãŸã‚«ãƒ¼ãƒ‰ãŒ4æšã‚ã‚Šã€ç®±ã®ä¸­ã‹ã‚‰1æšãšã¤é †ç•ªã«ã™ã¹ã¦ã®ã‚«ãƒ¼ãƒ‰ã‚’å–ã£ãŸã¨ãã«ã‚ã‚Šã†ã‚‹é †ç•ªã‚’åˆ—æŒ™ã—ãŸã‚‚ã®ã€ã¨ã„ã†ã‚„ã¤

```txt
+---------+
| box     |
+---------+
| 1,3,4   |
+---------+

+---+
| 2 |
+---+
```

```txt
+---------+
| box     |
+---------+
| 3,4     |
+---------+

+---+---+
| 2 | 1 |
+---+---+
```

```txt
+---------+
| box     |
+---------+
| 3       |
+---------+

+---+---+---+
| 2 | 1 | 4 |
+---+---+---+
```

```txt
+---------+
| box     |
+---------+
|         |
+---------+

+---+---+---+---+
| 2 | 1 | 4 | 3 |
+---+---+---+---+

â†‘ã“ã‚Œã®å–ã‚Šã†ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã™ã¹ã¦ã‚’ç¶²ç¾…ã™ã‚‹
```

## ãƒãƒ¼ãƒ—ãªå®Ÿè£…ã§æ´ã‚€

- ã‚ã‚‹å†…å®¹ã‚’æŒã¤ `Vec` ã®é †åˆ—ã‚’æ±‚ã‚ã‚‹é–¢æ•°ã‚’æ›¸ã„ã¦ã¿ã‚‹

```rust
fn permutations<T: Clone>(v: Vec<T>) -> Vec<Vec<T>> {
    // ç¶™ãæ¥ãã—ã¦ã„ãã®ã§ã€ LinkedListã«å¤‰æ›ã—ã¦é€²ã‚ã‚‹
    let mut list = LinkedList::from_iter(v.iter().cloned());
    return permutations_core(&mut Vec::new(), &mut list);
}
fn permutations_core<T: Clone>(picked: &mut Vec<T>, list: &mut LinkedList<T>) -> Vec<Vec<T>> {
    if list.len() == 0 {
        return vec![picked.clone()];
    }

    let mut res = Vec::new();

    for i in 0..list.len() {
        let mut after = list.split_off(i);
        if let Some(v) = after.pop_front() {
            picked.push(v);
            list.append(&mut after);
            let mut vv = permutations_core(picked, list);
            res.append(&mut vv);

            // ã‚‚ã¨ã«æˆ»ã™
            let v = picked.pop().unwrap();
            after = list.split_off(i);
            after.push_front(v);
        }
        list.append(&mut after);
    }

    return res;
}
```

- ç¶™ãæ¥ãã—ã‚„ã™ã„ã‚ˆã†ã€ `LinkedList` ã«å¤‰æ›ã—ã¦ã„ã‚‹
- ãƒªã‚¹ãƒˆã®å…ˆé ­æ–¹å‘ã‚’å„ªå…ˆã—ã¦ã²ã¨ã¤å–ã‚Šã€å†å¸°çš„ã«å®Ÿè¡Œã—ã¦ã„ã‚‹
