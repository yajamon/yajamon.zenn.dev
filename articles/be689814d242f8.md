---
title: "Rust 1.42.0 ç’°å¢ƒã§ rust-analyzer ã‚’å‹•ä½œã•ã›ã‚‹"
emoji: "ğŸ˜"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["atcoder", "rust"]
published: true
---

## ç¾è±¡

- Rust `1.42.0` ç’°å¢ƒã§ã€`rust-analyzer` ãŒå‹•ä½œã—ãªã„

ä»¥ä¸‹ã¯ vim-lsp ãŒå–å¾—ã—ãŸ `rust-analyzer` ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€‚(æ”¹è¡Œã¯ç­†è€…ãŒæŒ¿å…¥ã—ãŸã‚‚ã®)

```txt
rust-analyzer: error: rust-analyzer failed to load workspace: Failed to find sysroot for Cargo.toml file \${ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹}/atcoder/abc251/Cargo.toml.
Is rust-src installed?: can't load standard library from sysroot^@\$HOME/.rustup/toolchains/1.42.0-x86_64-unknown-linux-gnu^@(discovered via `rustc --print sysroot\\`)^@try installing the Rust source the same way you installed rustc
```

## çµè«–

```bash
# è‡ªå·±è²¬ä»»ã§ã€‚
cd $HOME/.rustup/toolchains/1.42.0-x86_64-unknown-linux-gnu/lib/rustlib/src/rust
ln -sv src library
```


## èƒŒæ™¯

- ç§ã¯ AtCoder ã« Rust ã§å‚åŠ ã—ã¦ã„ã‚‹
- AtCoder ã® Rustç’°å¢ƒã¯ `1.42.0` ã§ã‚ã‚‹
- æ‰‹å…ƒã®ç’°å¢ƒã‚‚ WSLä¸Šã® Ubuntu ã§ã€ `1.42.0` ã®ç’°å¢ƒã¨ã—ã¦ã„ã‚‹
- `rust-analyzer` ãŒ `rust-src` ã‚’è¦‹ã¤ã‘ã‚‰ã‚Œãªã„ã¨ã‚¨ãƒ©ãƒ¼ã‚’åãã‚ˆã†ã«ãªã£ãŸ


## åŸå› 

- `rust-analyzer` ãŒ `1.47.0` æœªæº€ã¨ã®å·®åˆ†ã‚’å¸åã™ã‚‹å‡¦ç†ã‚’æ¶ˆã—ãŸãŸã‚
    - https://github.com/rust-lang/rust-analyzer/pull/10457/files


## å¯¾å‡¦æ–¹é‡

- å·®åˆ†ã«ã‚ˆã‚‹ã¨ã€ `lib/rustlib/src/rust/src` ã‚’å‚ç…§ã™ã‚‹ã‹ã€ `lib/rustlib/src/rust/library` ã‚’å‚ç…§ã™ã‚‹ã‹ã®é•ã„ã§ã—ã‹ãªã„
- è‡ªå·±è²¬ä»»ã«ãŠã„ã¦ã€ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’è²¼ã£ã¦è§£æ±ºã¨ã—ãŸ

